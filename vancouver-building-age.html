---
layout: gis
title: Vancouver Building Age
permalink: /projects/vancouver-building-age/
---

<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
<link href='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v0.0.3/leaflet.fullscreen.css' rel='stylesheet' />
<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
<script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v0.0.3/Leaflet.fullscreen.min.js'></script>
<script src="/js/geoPosition.js" type="text/javascript" charset="utf-8"></script>
<link rel="stylesheet" href="/css/leaflet.awesome-markers.css">
<script src="/js/leaflet.awesome-markers.min.js"></script>

<style>
    #map {
        height: 600px;
        width: 100%;
        margin-bottom: 20px;
    }

    .gps_ring {
        border: 3px solid #999;
        -webkit-border-radius: 30px;
        height: 18px;
        width: 18px;
        position: absolute;
        left:20px;
        top:214px;
        -webkit-animation: pulsate 1s ease-out;
        -webkit-animation-iteration-count: infinite;
        opacity: 0.0;
    }

    @-webkit-keyframes pulsate {
        0% {-webkit-transform: scale(0.1, 0.1); opacity: 0.0;}
        50% {opacity: 1.0;}
        100% {-webkit-transform: scale(1.2, 1.2); opacity: 0.0;}
    }

    .my-legend {
      /*background-color: #f9f9f9;*/
      padding: 10px;
      opacity: 0.8;
    }

    .my-legend .legend-title {
      text-align: left;
      margin-bottom: 8px;
      font-weight: bold;
      font-size: 90%;
    }
    .my-legend .legend-scale ul {
      margin: 0;
      padding: 0;
      float: left;
      list-style: none;
    }
    .my-legend .legend-scale ul li {
      display: block;
      float: left;
      width: 40px;
      margin-bottom: 6px;
      text-align: center;
      font-size: 80%;
      list-style: none;
    }
    .my-legend ul.legend-labels li span {
      display: block;
      float: left;
      height: 15px;
      width: 40px;
    }
    .my-legend .legend-source {
      font-size: 70%;
      color: #999;
      clear: both;
    }
    .my-legend a {
      color: #777;
    }
    li#PARK span {
      height: 13px;
      width: 38px;
      margin-left: 2px;
     border: 1px solid #a4a4a4;
     }
</style>

<div class="container">
    <div class="col-lg-12">
        <header class="post-header">
            <h1>Vancouver Building Age Visualization</h1>
        </header>

        <article class="post-content">
            <div class="my-legend">
                <div class='legend-scale'>
                    <ul class='legend-labels'>
                        <li><span style='background:#f6f477;'></span>1800s</li>
                        <li><span style='background:#ffe00c;'></span>1900s</li>
                        <li><span style='background:#fdbf34;'></span>1910s</li>
                        <li><span style='background:#fd900c;'></span>1920s</li>
                        <li><span style='background:#f16f2d;'></span>1930s</li>
                        <li><span style='background:#d24b2d;'></span>1940s</li>
                        <li><span style='background:#b54545;'></span>1950s</li>
                        <li><span style='background:#835771;'></span>1960s</li>
                        <li><span style='background:#576aaf;'></span>1970s</li>
                        <li><span style='background:#3b8bf3;'></span>1980s</li>
                        <li><span style='background:#4fabe5;'></span>1990s</li>
                        <li><span style='background:#53cde0;'></span>2000s</li>
                        <li><span style='background:#82ecd0;'></span>2010s</li>
                        <li id='PARK'><span style='background:#fff;'></span>Parks</li>
                    </ul>
                </div>

                <div class='legend-source'>Data source: <a href="http://data.vancouver.ca/datacatalogue/">Open Data City of Vancouver</a></div>
            </div>
        </article>
    </div>

    <div class="col-lg-12">
        <div id="map"></div>

        <p>Inspired by building age maps popping up for different cities (Portland, New York, etc.) I created the Vancouver Building Age map using publicly available data on the City of Vancouver website.</p>
        <p>In particular I used the parcel polygon shapefile (containing land lot outlines) and a property tax report table. Unfortunately, I could not use building footprints because the latest file containing such information dates back to 1999. I am currently in the process of adding the hover effect to display addresses and will soon post a more detailed description of the map creation process. Some lots do not actually have any information on when the buildings were constructed so I left them gray.</p>
        <p>Hope you have fun exploring the map! My personal favourite is the octopus-looking Shaughnessy lots between Oak st and Granville st.</p>
    </div>
</div>

<script>
    var map = L.map('map').setView([49.254837, -123.1382151], 12);

    L.tileLayer('http://104.131.233.11:45001/vancouver/{z}/{x}/{y}.png', {
        minZoom: 12,
        maxZoom: 18
    }).addTo(map);

    L.control.fullscreen().addTo(map);

    if (geoPosition.init()) {
        geoPosition.getCurrentPosition(
            // success
            function (p) {
                var icon, marker;

                icon = L.AwesomeMarkers.icon({
                    icon: 'home',
                    markerColor: 'red'
                });

                marker = L.marker(
                    [p.coords.latitude, p.coords.longitude],
                    {icon: icon}
                ).addTo(map);

                marker.bindPopup("<b>Hey!</b><br>You are here.").openPopup();
            },

            // error
            function (e) {},

            // options
            {
                enableHighAccuracy: true
            }
        );
    }
</script>
